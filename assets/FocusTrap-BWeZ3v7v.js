import{r as c}from"./index-BP8_t0zE.js";import{a as v}from"./Transition-BCGcMdvv.js";import{f as g,u as h,a as x,j as m,B as I}from"./factory-BYdAncit.js";import{i as R}from"./OptionalPortal-pP32-1nJ.js";import{r as w}from"./random-id-CCVmTau8.js";import{u as F}from"./use-merged-ref-Zmja8g2s.js";function _({opened:t,shouldReturnFocus:n=!0}){const e=c.useRef(),s=()=>{var r;e.current&&"focus"in e.current&&typeof e.current.focus=="function"&&((r=e.current)==null||r.focus({preventScroll:!0}))};return v(()=>{let r=-1;const i=a=>{a.key==="Tab"&&window.clearTimeout(r)};return document.addEventListener("keydown",i),t?e.current=document.activeElement:n&&(r=window.setTimeout(s,10)),()=>{window.clearTimeout(r),document.removeEventListener("keydown",i)}},[t,n]),s}function H(t,n="body > :not(script)"){const e=w(),s=Array.from(document.querySelectorAll(n)).map(r=>{var u;if((u=r==null?void 0:r.shadowRoot)!=null&&u.contains(t)||r.contains(t))return;const i=r.getAttribute("aria-hidden"),a=r.getAttribute("data-hidden"),o=r.getAttribute("data-focus-id");return r.setAttribute("data-focus-id",e),i===null||i==="false"?r.setAttribute("aria-hidden","true"):!a&&!o&&r.setAttribute("data-hidden",i),{node:r,ariaHidden:a||null}});return()=>{s.forEach(r=>{!r||e!==r.node.getAttribute("data-focus-id")||(r.ariaHidden===null?r.node.removeAttribute("aria-hidden"):r.node.setAttribute("aria-hidden",r.ariaHidden),r.node.removeAttribute("data-focus-id"),r.node.removeAttribute("data-hidden"))})}}const S=/input|select|textarea|button|object/,p="a, input, select, textarea, button, object, [tabindex]";function k(t){return t.style.display==="none"}function L(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let e=t;for(;e&&!(e===document.body||e.nodeType===11);){if(k(e))return!1;e=e.parentNode}return!0}function y(t){let n=t.getAttribute("tabindex");return n===null&&(n=void 0),parseInt(n,10)}function l(t){const n=t.nodeName.toLowerCase(),e=!Number.isNaN(y(t));return(S.test(n)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||e)&&L(t)}function A(t){const n=y(t);return(Number.isNaN(n)||n>=0)&&l(t)}function j(t){return Array.from(t.querySelectorAll(p)).filter(A)}function D(t,n){const e=j(t);if(!e.length){n.preventDefault();return}const s=e[n.shiftKey?0:e.length-1],r=t.getRootNode();let i=s===r.activeElement||t===r.activeElement;const a=r.activeElement;if(a.tagName==="INPUT"&&a.getAttribute("type")==="radio"&&(i=e.filter(d=>d.getAttribute("type")==="radio"&&d.getAttribute("name")===a.getAttribute("name")).includes(s)),!i)return;n.preventDefault();const u=e[n.shiftKey?e.length-1:0];u&&u.focus()}function B(t=!0){const n=c.useRef(),e=c.useRef(null),s=i=>{let a=i.querySelector("[data-autofocus]");if(!a){const o=Array.from(i.querySelectorAll(p));a=o.find(A)||o.find(l)||null,!a&&l(i)&&(a=i)}a&&a.focus({preventScroll:!0})},r=c.useCallback(i=>{if(t){if(i===null){e.current&&(e.current(),e.current=null);return}e.current=H(i),n.current!==i&&(i?(setTimeout(()=>{i.getRootNode()&&s(i)}),n.current=i):n.current=null)}},[t]);return c.useEffect(()=>{if(!t)return;n.current&&setTimeout(()=>s(n.current));const i=a=>{a.key==="Tab"&&n.current&&D(n.current,a)};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i),e.current&&e.current()}},[t]),r}var N={root:"m_515a97f8"};const q={},f=g((t,n)=>{const e=h("VisuallyHidden",q,t),{classNames:s,className:r,style:i,styles:a,unstyled:o,vars:u,...b}=e,d=x({name:"VisuallyHidden",classes:N,props:e,className:r,style:i,classNames:s,styles:a,unstyled:o});return m.jsx(I,{component:"span",ref:n,...d("root"),...b})});f.classes=N;f.displayName="@mantine/core/VisuallyHidden";function T({children:t,active:n=!0,refProp:e="ref",innerRef:s}){const r=B(n),i=F(r,s);return R(t)?c.cloneElement(t,{[e]:i}):t}function E(t){return m.jsx(f,{tabIndex:-1,"data-autofocus":!0,...t})}T.displayName="@mantine/core/FocusTrap";E.displayName="@mantine/core/FocusTrapInitialFocus";T.InitialFocus=E;export{T as F,_ as u};
