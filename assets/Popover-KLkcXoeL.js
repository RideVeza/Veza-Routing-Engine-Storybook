import{f as V,u as T,j as g,B as xe,r as Oe,y as De,a as Ce,c as Re,g as Te,k as be}from"./factory-BYdAncit.js";import{r as f}from"./index-BP8_t0zE.js";import{O as Ee,i as Fe,g as Se}from"./OptionalPortal-pP32-1nJ.js";import{u as ze}from"./DirectionProvider-Bt7M7wKl.js";import{F as Ne,u as Ie,a as ke,o as je,s as _e,l as M,f as $,i as K,b as Ae,c as Me,g as $e}from"./use-floating-auto-update-zUEi8vAS.js";import{c as Ke}from"./create-safe-context-cIFFkskc.js";import{u as Le,F as Ue}from"./FocusTrap-BWeZ3v7v.js";import{T as Ve,a as L}from"./Transition-BCGcMdvv.js";import{u as X}from"./use-merged-ref-Zmja8g2s.js";import{u as Xe}from"./use-uncontrolled-D1uLaDoI.js";import{u as Ye}from"./use-id-Cc9noPIB.js";const Be=()=>{};function He(e,r={active:!0}){return typeof e!="function"||!r.active?r.onKeyDown||Be:t=>{var n;t.key==="Escape"&&(e(t),(n=r.onTrigger)==null||n.call(r))}}const U=["mousedown","touchstart"];function Ze(e,r,t){const n=f.useRef();return f.useEffect(()=>{const l=i=>{const{target:s}=i??{};if(Array.isArray(t)){const a=(s==null?void 0:s.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(s)&&s.tagName!=="HTML";t.every(c=>!!c&&!i.composedPath().includes(c))&&!a&&e()}else n.current&&!n.current.contains(s)&&e()};return(r||U).forEach(i=>document.addEventListener(i,l)),()=>{(r||U).forEach(i=>document.removeEventListener(i,l))}},[n,e,t]),n}const[qe,Y]=Ke("Popover component was not found in the tree");var B={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const Ge={},b=V((e,r)=>{var w,m,h,x;const t=T("PopoverDropdown",Ge,e),{className:n,style:l,vars:i,children:s,onKeyDownCapture:a,variant:p,classNames:c,styles:u,...y}=t,o=Y(),v=Le({opened:o.opened,shouldReturnFocus:o.returnFocus}),D=o.withRoles?{"aria-labelledby":o.getTargetId(),id:o.getDropdownId(),role:"dialog",tabIndex:-1}:{},C=X(r,o.floating);return o.disabled?null:g.jsx(Ee,{...o.portalProps,withinPortal:o.withinPortal,children:g.jsx(Ve,{mounted:o.opened,...o.transitionProps,transition:((w=o.transitionProps)==null?void 0:w.transition)||"fade",duration:((m=o.transitionProps)==null?void 0:m.duration)??150,keepMounted:o.keepMounted,exitDuration:typeof((h=o.transitionProps)==null?void 0:h.exitDuration)=="number"?o.transitionProps.exitDuration:(x=o.transitionProps)==null?void 0:x.duration,children:R=>g.jsx(Ue,{active:o.trapFocus&&o.opened,innerRef:C,children:g.jsxs(xe,{...D,...y,variant:p,onKeyDownCapture:He(o.onClose,{active:o.closeOnEscape,onTrigger:v,onKeyDown:a}),"data-position":o.placement,"data-fixed":o.floatingStrategy==="fixed"||void 0,...o.getStyles("dropdown",{className:n,props:t,classNames:c,styles:u,style:[{...R,zIndex:o.zIndex,top:o.y??0,left:o.x??0,width:o.width==="target"?void 0:Oe(o.width)},l]}),children:[s,g.jsx(Ne,{ref:o.arrowRef,arrowX:o.arrowX,arrowY:o.arrowY,visible:o.withArrow,position:o.placement,arrowSize:o.arrowSize,arrowRadius:o.arrowRadius,arrowOffset:o.arrowOffset,arrowPosition:o.arrowPosition,...o.getStyles("arrow",{props:t,classNames:c,styles:u})})]})})})})});b.classes=B;b.displayName="@mantine/core/PopoverDropdown";const Je={refProp:"ref",popupType:"dialog"},H=V((e,r)=>{const{children:t,refProp:n,popupType:l,...i}=T("PopoverTarget",Je,e);if(!Fe(t))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=i,a=Y(),p=X(a.reference,t.ref,r),c=a.withRoles?{"aria-haspopup":l,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return f.cloneElement(t,{...s,...c,...a.targetProps,className:De(a.targetProps.className,s.className,t.props.className),[n]:p,...a.controlled?null:{onClick:a.onToggle}})});H.displayName="@mantine/core/PopoverTarget";function Qe(e){if(e===void 0)return{shift:!0,flip:!0};const r={...e};return e.shift===void 0&&(r.shift=!0),e.flip===void 0&&(r.flip=!0),r}function We(e,r){const t=Qe(e.middlewares),n=[je(e.offset)];return t.shift&&n.push(_e(typeof t.shift=="boolean"?{limiter:M(),padding:5}:{limiter:M(),padding:5,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?$():$(t.flip)),t.inline&&n.push(typeof t.inline=="boolean"?K():K(t.inline)),n.push(Ae({element:e.arrowRef,padding:e.arrowOffset})),(t.size||e.width==="target")&&n.push(Me({...typeof t.size=="boolean"?{}:t.size,apply({rects:l,availableWidth:i,availableHeight:s,...a}){var u;const c=((u=r().refs.floating.current)==null?void 0:u.style)??{};t.size&&(typeof t.size=="object"&&t.size.apply?t.size.apply({rects:l,availableWidth:i,availableHeight:s,...a}):Object.assign(c,{maxWidth:`${i}px`,maxHeight:`${s}px`})),e.width==="target"&&Object.assign(c,{width:`${l.reference.width}px`})}})),n}function eo(e){const[r,t]=Xe({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),n=()=>{var s;r&&((s=e.onClose)==null||s.call(e),t(!1))},l=()=>{var s,a;r?((s=e.onClose)==null||s.call(e),t(!1)):((a=e.onOpen)==null||a.call(e),t(!0))},i=Ie({strategy:e.strategy,placement:e.position,middleware:We(e,()=>i)});return ke({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:i}),L(()=>{var s;(s=e.onPositionChange)==null||s.call(e,i.placement)},[i.placement]),L(()=>{var s,a;e.opened?(a=e.onOpen)==null||a.call(e):(s=e.onClose)==null||s.call(e)},[e.opened]),{floating:i,controlled:typeof e.opened=="boolean",opened:r,onClose:n,onToggle:l}}const oo={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Se("popover"),__staticSelector:"Popover",width:"max-content"},to=Re((e,{radius:r,shadow:t})=>({dropdown:{"--popover-radius":r===void 0?void 0:Te(r),"--popover-shadow":be(t)}}));function O(e){var N,I,k,j,_,A;const r=T("Popover",oo,e),{children:t,position:n,offset:l,onPositionChange:i,positionDependencies:s,opened:a,transitionProps:p,width:c,middlewares:u,withArrow:y,arrowSize:o,arrowOffset:v,arrowRadius:D,arrowPosition:C,unstyled:w,classNames:m,styles:h,closeOnClickOutside:x,withinPortal:R,portalProps:Z,closeOnEscape:q,clickOutsideEvents:G,trapFocus:J,onClose:Q,onOpen:W,onChange:ee,zIndex:oe,radius:te,shadow:re,id:se,defaultOpened:ae,__staticSelector:E,withRoles:ne,disabled:ie,returnFocus:le,variant:de,keepMounted:ce,vars:fe,floatingStrategy:F,...pe}=r,ue=Ce({name:E,props:r,classes:B,classNames:m,styles:h,unstyled:w,rootSelector:"dropdown",vars:fe,varsResolver:to}),S=f.useRef(null),[ge,we]=f.useState(null),[me,he]=f.useState(null),{dir:Pe}=ze(),z=Ye(se),d=eo({middlewares:u,width:c,position:$e(Pe,n),offset:typeof l=="number"?l+(y?o/2:0):l,arrowRef:S,arrowOffset:v,onPositionChange:i,positionDependencies:s,opened:a,defaultOpened:ae,onChange:ee,onOpen:W,onClose:Q,strategy:F});Ze(()=>x&&d.onClose(),G,[ge,me]);const ye=f.useCallback(P=>{we(P),d.floating.refs.setReference(P)},[d.floating.refs.setReference]),ve=f.useCallback(P=>{he(P),d.floating.refs.setFloating(P)},[d.floating.refs.setFloating]);return g.jsx(qe,{value:{returnFocus:le,disabled:ie,controlled:d.controlled,reference:ye,floating:ve,x:d.floating.x,y:d.floating.y,arrowX:(k=(I=(N=d.floating)==null?void 0:N.middlewareData)==null?void 0:I.arrow)==null?void 0:k.x,arrowY:(A=(_=(j=d.floating)==null?void 0:j.middlewareData)==null?void 0:_.arrow)==null?void 0:A.y,opened:d.opened,arrowRef:S,transitionProps:p,width:c,withArrow:y,arrowSize:o,arrowOffset:v,arrowRadius:D,arrowPosition:C,placement:d.floating.placement,trapFocus:J,withinPortal:R,portalProps:Z,zIndex:oe,radius:te,shadow:re,closeOnEscape:q,onClose:d.onClose,onToggle:d.onToggle,getTargetId:()=>`${z}-target`,getDropdownId:()=>`${z}-dropdown`,withRoles:ne,targetProps:pe,__staticSelector:E,classNames:m,styles:h,unstyled:w,variant:de,keepMounted:ce,getStyles:ue,floatingStrategy:F},children:t})}O.Target=H;O.Dropdown=b;O.displayName="@mantine/core/Popover";O.extend=e=>e;export{O as P};
